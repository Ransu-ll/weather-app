<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ whatNotFound.capitalize() }} Not Found - AW2</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="search-wrapper">
        <div class="search-card">
            <h1>üå¶Ô∏è Change that should cause failure</h1>
            <h2>Sorry, we couldn't find that {{ whatNotFound }}</h2>

            <form action="/town_info_get" method="get" class="search-form">
                <label for="townsearch">
                    <p>
                        {{ prompt }}
                        <br>
                        <input id="townsearch" list="towns" name="town" placeholder="e.g., Sydney, NSW" required>
                        <button type="submit">Go</button>
                    </p>
                </label>
                <datalist id="towns">
                    {% for town in towns.keys() %}
                        <option value="{{ town|e }}"></option>
                    {% endfor %}
                </datalist>
            </form>
        </div>
    </div>
    <!-- ‚úÖ JS for dynamic autocomplete from Flask -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        const datalist = document.getElementById("towns");

        fetch("/api/towns")
            .then(response => response.json())
            .then(data => {
                datalist.innerHTML = "";
                data.forEach(town => {
                    const option = document.createElement("option");
                    option.value = town;
                    datalist.appendChild(option);
                });
            })
            .catch(err => {
                console.error("‚ö†Ô∏è Error loading town list:", err);
            });
    });
    </script>
</body>
</html>
